<div class="container mx-auto px-4 py-6">
  <!-- Header -->
  <div class="bg-background-secondary rounded-xl shadow-sm p-6 mb-6">
    <h1 class="text-2xl font-bold text-text-primary">
      üì¨ Your Invitations
    </h1>
    <p class="text-text-secondary mt-1">Trip invitations and history</p>
  </div>

  <!-- Pending Invitations -->
  <% if @pending_invitations.any? %>
    <div class="mb-8">
      <h2 class="text-lg font-semibold text-text-primary mb-4">‚è≥ Pending</h2>
      <div class="space-y-4">
        <% @pending_invitations.each do |invitation| %>
          <div class="bg-background-secondary rounded-xl shadow-sm p-6 border-l-4 border-primary-accent">
            <div class="flex items-start justify-between mb-4">
              <div class="flex-1">
                <h3 class="text-xl font-bold text-text-primary"><%= invitation.trip.name %></h3>
                <p class="text-text-secondary text-sm mt-1">
                  <%= invitation.role == 'admin' ? 'üëë Admin' : invitation.role == 'member' ? 'üë§ Member' : 'üëÄ Guest' %> invitation from <%= invitation.invited_by.email_address %>
                </p>
              </div>
            </div>

            <% if invitation.trip.description.present? %>
              <p class="text-text-secondary mb-4 line-clamp-2"><%= invitation.trip.description %></p>
            <% end %>

            <div class="bg-background-primary rounded-lg p-3 mb-4 space-y-2 text-sm">
              <% if invitation.trip.start_date %>
                <div class="flex items-center justify-between">
                  <span class="text-text-secondary">Trip dates:</span>
                  <span class="text-text-primary font-medium">
                    <%= invitation.trip.start_date.strftime('%b %d') %> -
                    <%= invitation.trip.end_date.strftime('%b %d, %Y') %>
                  </span>
                </div>
              <% end %>
              <div class="flex items-center justify-between">
                <span class="text-text-secondary">Expires:</span>
                <span class="text-accent-red">in <%= time_ago_in_words(invitation.expires_at) %></span>
              </div>
            </div>

            <div class="flex gap-3">
              <%= link_to invitation_path(invitation.token),
                  class: "flex-1 bg-primary-accent text-white px-4 py-2 rounded-lg font-medium hover:bg-blue-600 transition-colors text-center" do %>
                ‚úì View & Accept
              <% end %>

              <%= button_to decline_invitation_path(invitation.token),
                  method: :patch,
                  data: { turbo_confirm: "Are you sure you want to decline this invitation?" },
                  class: "flex-1 bg-gray-500 text-white px-4 py-2 rounded-lg font-medium hover:bg-gray-600 transition-colors" do %>
                ‚úó Decline
              <% end %>
            </div>
          </div>
        <% end %>
      </div>
    </div>
  <% end %>

  <!-- Accepted Invitations -->
  <% if @accepted_invitations.any? %>
    <div class="mb-8">
      <h2 class="text-lg font-semibold text-text-primary mb-4">‚úì Accepted</h2>
      <div class="space-y-3">
        <% @accepted_invitations.each do |invitation| %>
          <div class="bg-background-secondary rounded-lg p-4 border-l-4 border-accent-green">
            <div class="flex items-center justify-between">
              <div class="flex-1">
                <%= link_to trip_path(invitation.trip), class: "font-semibold text-text-primary hover:text-primary-accent" do %>
                  <%= invitation.trip.name %>
                <% end %>
                <p class="text-text-secondary text-sm mt-1">
                  Accepted <%= time_ago_in_words(invitation.updated_at) %> ago
                </p>
              </div>
              <span class="text-accent-green text-2xl">‚úì</span>
            </div>
          </div>
        <% end %>
      </div>
    </div>
  <% end %>

  <!-- Declined Invitations -->
  <% if @declined_invitations.any? %>
    <div class="mb-8">
      <h2 class="text-lg font-semibold text-text-secondary mb-4">‚úó Declined</h2>
      <div class="space-y-3">
        <% @declined_invitations.each do |invitation| %>
          <div class="bg-background-secondary rounded-lg p-4 border-l-4 border-gray-400 opacity-75">
            <div class="flex items-center justify-between">
              <div class="flex-1">
                <p class="font-medium text-text-secondary"><%= invitation.trip.name %></p>
                <p class="text-text-secondary text-sm mt-1">
                  Declined <%= time_ago_in_words(invitation.updated_at) %> ago
                </p>
              </div>
              <span class="text-gray-400 text-2xl">‚úó</span>
            </div>
          </div>
        <% end %>
      </div>
    </div>
  <% end %>

  <!-- Empty State -->
  <% if @pending_invitations.empty? && @accepted_invitations.empty? && @declined_invitations.empty? %>
    <div class="bg-background-secondary rounded-xl shadow-sm p-12 text-center">
      <div class="text-6xl mb-4 opacity-40">üì≠</div>
      <h2 class="text-xl font-bold text-text-primary mb-2">No Invitations</h2>
      <p class="text-text-secondary mb-6">
        You're all caught up! When friends invite you to trips, they'll appear here.
      </p>
      <%= link_to root_path,
          class: "bg-primary-accent text-white px-6 py-2 rounded-lg font-medium hover:bg-blue-600 transition-colors inline-block" do %>
        Go Home
      <% end %>
    </div>
  <% end %>
</div>
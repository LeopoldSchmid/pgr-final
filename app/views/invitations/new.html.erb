<div class="container mx-auto px-4 py-6">
  <!-- Header -->
  <div class="bg-background-secondary rounded-xl shadow-sm p-4 mb-4">
    <%= link_to trip_invitations_path(@trip), class: "text-primary-accent hover:text-blue-400 font-medium flex items-center" do %>
      <span class="mr-2">←</span> Back to Invitations • <span class="ml-2">Invite Friend</span>
    <% end %>
  </div>

  <!-- Invitation Form -->
  <div class="bg-background-secondary rounded-xl shadow-sm p-4">
    <%= form_with model: [@trip, @invitation], local: true, class: "space-y-4" do |form| %>

      <!-- Email and Role - Inline Labels and Fields -->
      <div class="grid grid-cols-1 gap-4">
        <div class="flex flex-col sm:flex-row sm:items-center sm:space-x-3">
          <%= form.label :email, "Email Address", class: "text-text-primary font-medium text-sm sm:w-24 flex-shrink-0 mb-1 sm:mb-0" %>
          <%= form.email_field :email,
              placeholder: "friend@example.com",
              class: "flex-1 p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-background-primary text-text-primary text-sm" %>
        </div>
        <% if @invitation.errors[:email].any? %>
          <div>
            <p class="text-red-500 text-sm"><%= @invitation.errors[:email].first %></p>
          </div>
        <% end %>

        <div class="flex flex-col sm:flex-row sm:items-center sm:space-x-3">
          <%= form.label :role, "Role", class: "text-text-primary font-medium text-sm sm:w-24 flex-shrink-0 mb-1 sm:mb-0" %>
          <%= form.select :role,
              options_for_select([
                ['Guest - Can view trip details and journal entries', 'guest'],
                ['Member - Can view and add expenses', 'member'],
                ['Admin - Can manage expenses and invite others', 'admin']
              ], @invitation.role),
              {},
              class: "flex-1 p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-background-primary text-text-primary text-sm" %>
        </div>
      </div>

      <!-- Role Description -->
      <div class="text-text-secondary text-sm bg-background-primary rounded-lg p-3 border border-gray-200">
        Guests can view the trip, members can participate in expenses, admins can manage everything
      </div>

      <!-- Info Box -->
      <div class="bg-blue-50 border border-blue-200 rounded-lg p-3">
        <div class="text-blue-800">
          <h4 class="font-semibold text-sm mb-1">How invitations work:</h4>
          <ul class="text-xs space-y-1">
            <li>• Your friend will receive an invitation link</li>
            <li>• They can create an account or sign in with an existing account</li>
            <li>• Once accepted, they'll be able to participate in the trip</li>
            <li>• Invitations expire after 7 days</li>
          </ul>
        </div>
      </div>

      <!-- Submit Button -->
      <div class="flex justify-end space-x-3">
        <%= link_to trip_invitations_path(@trip), class: "px-4 py-2 text-text-secondary hover:text-text-primary" do %>
          Cancel
        <% end %>
        <%= form.submit "Send Invitation",
            class: "bg-primary-accent text-background-primary px-4 py-2 rounded-lg font-medium hover:bg-blue-600 transition-colors" %>
      </div>
    <% end %>
  </div>
</div>

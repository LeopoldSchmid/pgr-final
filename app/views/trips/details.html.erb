<% content_for :title, "#{@trip.name} - Details" %>

<div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
  <div class="bg-background-secondary rounded-2xl shadow-lg p-6 mb-6 animate-fade-in">
    <h1 class="text-2xl font-bold text-text-primary mb-6">Trip Details</h1>

    <%= form_with model: @trip, url: trip_path(@trip), method: :patch, class: "space-y-6" do |f| %>
      <!-- Trip Name -->
      <div>
        <%= f.label :name, "Trip Name", class: "block text-sm font-medium text-text-primary mb-2" %>
        <%= f.text_field :name, class: "w-full px-4 py-2 border border-white/20 rounded-lg bg-background-primary text-text-primary focus:ring-2 focus:ring-primary-accent focus:border-transparent" %>
      </div>

      <!-- Description -->
      <div>
        <%= f.label :description, "Description", class: "block text-sm font-medium text-text-primary mb-2" %>
        <%= f.text_area :description, rows: 4, class: "w-full px-4 py-2 border border-white/20 rounded-lg bg-background-primary text-text-primary focus:ring-2 focus:ring-primary-accent focus:border-transparent" %>
      </div>

      <!-- Dates -->
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div>
          <%= f.label :start_date, "Start Date", class: "block text-sm font-medium text-text-primary mb-2" %>
          <%= f.date_field :start_date, class: "w-full px-4 py-2 border border-white/20 rounded-lg bg-background-primary text-text-primary focus:ring-2 focus:ring-primary-accent focus:border-transparent" %>
        </div>
        <div>
          <%= f.label :end_date, "End Date", class: "block text-sm font-medium text-text-primary mb-2" %>
          <%= f.date_field :end_date, class: "w-full px-4 py-2 border border-white/20 rounded-lg bg-background-primary text-text-primary focus:ring-2 focus:ring-primary-accent focus:border-transparent" %>
        </div>
      </div>

      <!-- Series Name -->
      <div>
        <%= f.label :series_name, "Series Name (Optional)", class: "block text-sm font-medium text-text-primary mb-2" %>
        <%= f.text_field :series_name, placeholder: "e.g., Annual Ski Trip", class: "w-full px-4 py-2 border border-white/20 rounded-lg bg-background-primary text-text-primary focus:ring-2 focus:ring-primary-accent focus:border-transparent" %>
        <p class="text-xs text-text-secondary mt-1">Group related trips together</p>
      </div>

      <!-- Actions -->
      <div class="flex items-center space-x-4">
        <%= f.submit "Save Changes", class: "bg-primary-accent text-white px-6 py-2 rounded-lg font-medium hover:bg-primary-accent/90 transition-colors" %>
        <%= link_to "Cancel", trip_overview_path, class: "text-text-secondary hover:text-text-primary transition-colors" %>
      </div>
    <% end %>
  </div>

  <!-- Date Proposals Section (if TBD) -->
  <% if @date_proposals.any? %>
    <div class="bg-background-secondary rounded-2xl shadow-lg p-6 animate-fade-in">
      <h2 class="text-xl font-bold text-text-primary mb-4">Date Proposals</h2>
      <div class="space-y-3">
        <% @date_proposals.each do |proposal| %>
          <div class="p-4 border border-white/10 rounded-lg">
            <p class="text-text-primary font-medium">
              <%= proposal.start_date.strftime("%B %d") %> - <%= proposal.end_date.strftime("%B %d, %Y") %>
            </p>
            <p class="text-sm text-text-secondary mt-1">
              Proposed by <%= proposal.user.email_address %>
            </p>
          </div>
        <% end %>
      </div>
      <%= link_to "Manage Date Proposals", trip_date_proposals_path(@trip), class: "inline-block mt-4 text-primary-accent hover:text-blue-400 transition-colors" %>
    </div>
  <% end %>

  <!-- Danger Zone -->
  <div class="bg-background-secondary rounded-2xl shadow-lg p-6 border-2 border-red-500/20 mt-6 animate-fade-in">
    <h2 class="text-xl font-bold text-red-500 mb-4">Danger Zone</h2>
    <p class="text-text-secondary mb-4">Deleting this trip will remove all associated data including meals, expenses, and memories.</p>
    <%= button_to "Delete Trip", trip_path(@trip), method: :delete,
        data: { turbo_confirm: "Are you sure you want to delete this trip? This action cannot be undone." },
        class: "bg-red-500 text-white px-6 py-2 rounded-lg font-medium hover:bg-red-600 transition-colors" %>
  </div>
</div>

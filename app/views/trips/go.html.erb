<div class="container mx-auto px-4 py-6">
  <!-- Trip Header -->
  <div class="bg-gradient-to-r from-white to-emerald-50 rounded-2xl shadow-lg border border-emerald-200 p-8 mb-8">
    <div class="mb-6">
      <%= link_to go_path, class: "text-emerald-700 hover:text-emerald-900 font-medium flex items-center group mb-4" do %>
        <span class="transform group-hover:-translate-x-1 transition-transform mr-2">ğŸ’</span> Active Trips
      <% end %>
      <h1 class="text-3xl font-bold bg-gradient-to-r from-emerald-800 to-teal-700 bg-clip-text text-transparent">
        <%= @trip.name %>
      </h1>
    </div>
    
    <div class="flex items-center space-x-4">
      <span class="bg-gradient-to-r from-emerald-500 to-teal-500 text-white px-4 py-2 rounded-xl text-sm font-bold shadow-md">
        ğŸƒ Active
      </span>
      <% if @trip.start_date && @trip.end_date %>
        <span class="text-emerald-700 font-medium">
          ğŸ“… <%= @trip.start_date.strftime("%b %d") %> - <%= @trip.end_date.strftime("%b %d, %Y") %>
        </span>
      <% end %>
      <span class="text-emerald-700 font-medium">
        ğŸŒŸ Day <%= (@trip.start_date ? (Date.current - @trip.start_date).to_i + 1 : 1) %> of trip
      </span>
    </div>
  </div>

  <!-- Trip Journal -->
  <div class="mb-8">
    <!-- Add New Journal Entry -->
    <div class="bg-gradient-to-r from-white to-emerald-50 rounded-2xl shadow-lg border border-emerald-200 p-8 mb-6">
      <h3 class="text-xl font-bold text-emerald-900 mb-6 flex items-center">
        <span class="mr-3">ğŸ“</span> Capture This Moment
      </h3>
      
      <%= form_with model: [@trip, @new_journal_entry], local: true, class: "space-y-4" do |form| %>
        <div>
          <%= form.text_area :content, 
              placeholder: "What are you doing right now? Where are you? How does it feel?",
              class: "w-full p-4 border border-emerald-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent resize-none",
              rows: 3 %>
        </div>
        
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <div>
            <%= form.text_field :location, 
                placeholder: "Where are you? (e.g., 'Central Park', 'That amazing cafe')",
                class: "w-full p-3 border border-emerald-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent" %>
          </div>
          <div>
            <%= form.date_field :entry_date, 
                class: "w-full p-3 border border-emerald-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent" %>
          </div>
        </div>
        
        <div class="flex items-center justify-between">
          <label class="flex items-center">
            <%= form.check_box :favorite, class: "mr-2 rounded" %>
            <span class="text-emerald-700 font-medium">â­ Mark as favorite moment</span>
          </label>
          
          <%= form.submit "ğŸ“ Save Moment", 
              class: "bg-gradient-to-r from-emerald-600 to-teal-600 text-white px-6 py-3 rounded-xl font-bold hover:from-emerald-700 hover:to-teal-700 transition-all duration-200 shadow-lg transform hover:scale-105" %>
        </div>
      <% end %>
    </div>

    <!-- Journal Entries -->
    <% if @journal_entries.any? %>
      <div class="space-y-6">
        <h3 class="text-xl font-bold text-emerald-900 flex items-center">
          <span class="mr-3">ğŸ“–</span> Trip Journal
        </h3>
        
        <% @journal_entries.each do |entry| %>
          <div class="bg-gradient-to-r from-white to-emerald-50 rounded-2xl shadow-lg border border-emerald-200 p-6 <%= entry.favorite? ? 'ring-2 ring-yellow-400' : '' %>">
            <div class="flex items-start justify-between mb-4">
              <div class="flex items-center space-x-3">
                <div class="text-emerald-700 font-bold">
                  <%= entry.entry_date.strftime("%b %d") %>
                </div>
                <% if entry.location.present? %>
                  <div class="text-emerald-600 text-sm bg-emerald-100 px-3 py-1 rounded-full">
                    ğŸ“ <%= entry.location %>
                  </div>
                <% end %>
                <% if entry.favorite? %>
                  <div class="text-yellow-600">â­</div>
                <% end %>
              </div>
              
              <div class="flex space-x-2">
                <%= link_to toggle_favorite_trip_journal_entry_path(@trip, entry), method: :patch, 
                    class: "text-yellow-600 hover:text-yellow-700 #{entry.favorite? ? 'opacity-100' : 'opacity-50'}" do %>
                  â­
                <% end %>
                <%= link_to trip_journal_entry_path(@trip, entry), method: :delete, 
                    class: "text-red-500 hover:text-red-700 text-sm",
                    data: { confirm: "Delete this journal entry?" } do %>
                  ğŸ—‘ï¸
                <% end %>
              </div>
            </div>
            
            <div class="text-emerald-800 leading-relaxed">
              <%= simple_format(entry.content) %>
            </div>
            
            <div class="mt-4 text-xs text-emerald-600">
              Added <%= time_ago_in_words(entry.created_at) %> ago
            </div>
          </div>
        <% end %>
      </div>
    <% else %>
      <div class="bg-gradient-to-r from-white to-emerald-50 rounded-2xl shadow-lg border border-emerald-200 p-12">
        <div class="text-center">
          <div class="text-6xl mb-4 opacity-60">ğŸ“–</div>
          <h3 class="text-xl font-bold text-emerald-900 mb-3">Start Your Trip Journal</h3>
          <p class="text-emerald-700 mb-6">Capture the moments, feelings, and discoveries as they happen. Your future self will thank you! ğŸŒŸ</p>
        </div>
      </div>
    <% end %>
  </div>

  <!-- Quick Actions for Active Trip -->
  <div class="mt-8 bg-green-50 rounded-lg p-6">
    <h3 class="text-lg font-semibold text-gray-800 mb-4">Quick Actions</h3>
    <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
      <button class="flex flex-col items-center p-4 bg-white rounded-lg shadow-sm hover:shadow-md transition-shadow">
        <span class="text-2xl mb-2">ğŸ’°</span>
        <span class="text-sm font-medium text-gray-700">Split Bill</span>
      </button>
      <button class="flex flex-col items-center p-4 bg-white rounded-lg shadow-sm hover:shadow-md transition-shadow">
        <span class="text-2xl mb-2">ğŸ›’</span>
        <span class="text-sm font-medium text-gray-700">Check List</span>
      </button>
      <button class="flex flex-col items-center p-4 bg-white rounded-lg shadow-sm hover:shadow-md transition-shadow">
        <span class="text-2xl mb-2">ğŸ“±</span>
        <span class="text-sm font-medium text-gray-700">Share Photo</span>
      </button>
      <button class="flex flex-col items-center p-4 bg-white rounded-lg shadow-sm hover:shadow-md transition-shadow">
        <span class="text-2xl mb-2">â°</span>
        <span class="text-sm font-medium text-gray-700">Set Reminder</span>
      </button>
    </div>
  </div>

  <!-- End Trip Option -->
  <div class="mt-8 text-center">
    <button class="bg-gray-600 text-white px-6 py-2 rounded-lg font-medium hover:bg-gray-700 transition-colors">
      End Trip
    </button>
  </div>
</div>